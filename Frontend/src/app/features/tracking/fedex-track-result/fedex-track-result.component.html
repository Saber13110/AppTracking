<div class="fedex-container">
  <div *ngIf="loading" class="loading">Loading...</div>
  <div *ngIf="!loading && error" class="error">{{ error }}</div>

  <div *ngIf="!loading && trackingData" class="content">
    <div class="header">
      <div class="info">
        <h2>#{{ trackingData.tracking_number }}</h2>
        <div class="status">{{ trackingData.status.status }}</div>
        <div class="description">{{ trackingData.status.description }}</div>
      </div>
      <div class="actions">
        <button type="button" (click)="shareTracking()">Share</button>
        <button type="button" (click)="printTracking()">Print</button>
        <button type="button" (click)="saveTracking()">Save</button>
        <button type="button" (click)="exportPdf()">Export PDF</button>
        <button type="button" (click)="exportCsv()">Export CSV</button>
      </div>
    </div>

    <div class="grid">
      <div id="fedex-map" class="map"></div>
      <div class="timeline" *ngIf="trackingData.tracking_history?.length">
        <div
          *ngFor="let event of trackingData.tracking_history; let i = index"
          [ngClass]="getItemClasses(event, i)"
        >
          <div class="timeline-icon"></div>
          <div class="timeline-content">
            <div class="status">{{ event.status }}</div>
            <div class="time">{{ event.timestamp | date: 'medium' }}</div>
            <div class="location" *ngIf="event.location">
              {{ event.location.city }} {{ event.location.state }} {{ event.location.country }}
            </div>
            <div class="desc" *ngIf="event.description">{{ event.description }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
